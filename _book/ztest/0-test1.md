# 项目经验题
- 过程中遇到的最大的挑战，以及时怎么解决的？项目中的难点

# 场景题

## count
- 100G大小的文件，如何统计每个ip地址的访问量

## seek
- 万个ip段如何快速查找

## sort
- 1万条航班信息，按照时间进行排序，你会用什么

- 大量用户数据如何在内存中排序和去重

- 给你10亿个数，选择10个最小的

## set
- 两个文件都是10G，里面存着32位整数型，给8G内存，怎么求交集

- 海量url去重



## 微服务/分布式
- 一千个微服务 中有一个发生故障 怎么迅速定位？

- 系统从TPS 50上升到1000甚至更高
QPS：每s处理的数据量

## 数据库
一个sql查询慢，百万级别，单表，你觉得性能问题可能出在哪？

## 高并发
https://www.jianshu.com/p/4f35b3ad47bc

https://zhuanlan.zhihu.com/p/354040272

https://zhuanlan.zhihu.com/p/380217082

https://www.zhihu.com/question/267113602

### 秒杀系统设计
https://blog.csdn.net/liangkaiping0525/article/details/80836104
1. 将请求尽量拦截在系统上游（不要让锁冲突落到数据库上去）
2. 充分利用缓存，秒杀买票，这是一个典型的读多写少的应用场景，大部分请求是车次查询，票查询，下单和支付才是写请求。

### 进一步：30分钟没付款就自动关闭交易

Inner join 和left join 性能不同，inner join反而慢是为什么？

- 数据库自增 ID 用完了会咋样？  
int 4 个字节，最大数据量能存储 21 亿 -> bigint
https://juejin.cn/post/6984275678761844743
  
  redis怎么实现消息队列？怎么实现分布式锁？
  
  MQ为什么能单机抗很高的并发量
  Netty里序列化的方式
  如果说想提高性能 用什么序列化方案？
  Netty线程池：nioeventloopgroup 串行无锁化 thread和selector的封装
归并排序过程、时空复杂度
 用户态、内核态的区别。
 
 RPC框架和普通http有什么区别和优势？ 基于Tcp封装还是http封装的
 rpc是长连接吗？如果要传输一个特别大的文件 底层还是基于流吗？ Nio是一个什么IO模型？
作者：[数据删除]
链接：https://www.nowcoder.com/discuss/195640?type=2&order=0&pos=10&page=1
来源：牛客网

linux的fork指令对数据的拷贝是马上就拷贝的吗？
linux看网络状况用什么 看日志用什么？
拥塞控制 以及里面的算法？流量控制的协议
Ping命令做了什么？基于那一个层？ping是哪一个层的？

InnoDB行锁的分类 （其实就是排他锁和共享锁）
Select from update 是什么效果？事务你平常是怎么处理的？
两个队列实现一个栈、圆里均匀地生成点（极坐标系）
ps命令的底层实现（???）
类加载器 自己写过没
 

5、avl树怎么构建，怎么调整

6、最短路算法，地杰斯特拉，堆优化，正确性分析，spfa

介绍一下nio，他好在哪里，epoll实现 红黑树，和select poll的不同。介绍一下aio

倒排索引

粘包拆包问题


HashSet 的底层实现说下？为什么内置 HashMap ？说下它的数据结构，为什么 loadFactor 是 0.75 ？为什么要高位参与与运算？为什么它的 size 是 2 的 n 次方？为什么默认是 16 ？讲下它的扩容机制。什么时候转红黑树，为什么要转红黑树？为什么它是线程不安全的，它的哪些方法是线程不安全的？为什么会造成死循环？ 1.8 是如何解决这个问题的？它的线程安全的实现有什么？ ConcurrentHashMap 和 HashTable 有什么区别？说下它 1.7 和 1.8 的实现是什么？有什么区别？为什么要这么做？为什么说 ConcurrentHashMap 是线程安全的？它的 get 操作是有锁的吗？它是强一致性的吗？它为什么是弱一致性的？ ConcurrentHashMap 1.7 和 1.8 是如何扩容的？sizeCtl 参数是干什么的，讲讲变换过程？为什么要用 volatile 修饰？说说它的功能？什么是 MESI 协议？ CPU 原语是什么？什么是可见性？ JMM 说说是什么？为什么要有 JMM ？ Happened-before 是什么？它和 synchronized 的区别是什么？锁的升级与降级说下是什么？偏向锁是什么？ Mark-Wrod 说下？锁的粒度是什么？锁消除了解吗？锁会被合并吗？什么时候会发生？你刚才说了 CAS，你能说下它是什么东西吗？为什么要引入 CAS ？ ABA 问题是如何解决的？ AQS 了解吗？它是如何实现的？ CLH 又是什么？ ReentrantLock 和 synchronized 区别是什么？为什么 ReetrantLock 能实现公平锁？默认构造器是公平锁吗？为什么不是？ Copy-on-Write 了解吗？ Fork/Join 又是什么？什么是线程，什么是协程？你刚才说了管程？你能说下这几个到底是做什么的吗？线程池说下参数，四种内置的拒绝策略，以及它的执行流程。你用过吗？为什么要这么设置参数？ I/O 密集型应用和计算密集型应用如何设置其参数？你具体的业务线程池的参数是怎么设计的？为什么？测过吗？你定制化开发过吗？线程池预留了 3 个供子类扩展的方法你知道是哪三个吗？能做什么你知道吗？ ThreadLocal 是什么？它为什么会造成内存泄漏？你实际开发中用到过吗？ Spring 事务用这个干什么的？什么是事务的 SavePoint ？你知道死锁吗？如何解决死锁？ sleep 和 wait 的区别是什么？ BIO 、NIO 、AIO 是什么？说下区别，以及如何使用？了解 Netty 吗？如何解决粘包问题？ ChannelPipeline 又是什么？ ByteBuf 知道吗？读写指针又是什么？它和 mina 的区别是什么？它的 Zero-Copy ？了解过 FastThreadLocal 吗？它为什么比 ThreadLocal 快？有看过其中源码吗？ Netty 解决了 NIO 类库的什么问题？空轮询又是什么？ RPC 又是什么？序列化和反序列化又是什么？几个核心类说下。是干什么的？

你说你了解虚拟机，你知道虚拟机的运行时数据区吗？哪些是线程共享的，哪些是线程独有的？你了解 JVM 调优吗？调优过吗？为什么要这么设置？垃圾回收算法有几种？为什么要分代收集？ Young 区说说它的分布结构，为什么 Eden 区 80%？为什么大对象直接进入老年代？控制的参数是什么？一个对象如果不是大对象，怎样才能进入老年代？控制的参数是什么？什么时候会发生 OOM ？你遇到过吗？怎么解决的？为什么低版本的 JDK 要把永久代内存调大点？默认大小是多少你知道吗？什么是 Major GC，什么是 Minor GC ？什么情况下会频繁 GC ？你查看过 GC 日志吗？什么时候回收对象？引用计数和可达性分析是什么？为什么 Java 使用后者？ Python 使用前者？什么是 GCRoot ？什么时候对象不可达？ Java 的四种引用说下，分别用在什么场景？你知道 JDK 源码哪里有用到 WeakReference 吗？什么是 STW ？什么是 Safepoint ？类加载的过程说下，什么时候优化，以及不同的时候的主要优化是什么？解语法糖是什么时候？为什么在编译的时候解语法糖？什么是双亲委派模型？可以破坏吗？各个 ClassLoader 加载哪部分类的？你自定义过 ClassLoader 吗？你说你用过 Jstack 诊断 CPU 使用率飙升的情况，说下具体步骤？ Arthas 用过吗？ Class 文件格式说下，什么是魔数，Class 文件的魔数是什么？ JMX 了解吗？

ACID 说下是什么。你说你优化过 SQL，怎么优化的说下。like '%xx%'，like '%xx'，like 'xx%' 哪种情况会用到索引？说下 MySQL 执行流程。WAL(Write-Ahead Logging) 知道吗？ redo log 和 undo log 是什么，它们作用说下。你说你改过 buffer_pool_size 等参数，为什么要改它？它里面的数据结构说下是什么？为什么冷热 3:7 ？ join_buffer 你说你也改了，为什么？什么是驱动表和被驱动表？如何优化？你说你建了索引，什么是蔟集索引，什么是非蔟集索引？什么是回表？什么时候会索引失效？你的二级索引什么用得多？为什么优先使用普通索引，而不是唯一索引？ MySQL 会死锁吗？什么是间隙锁？它会导致什么问题？ MVCC 说下是什么？ 4 种事务说下是什么？哪种或者哪几种事务隔离级别能避免幻读？能避免脏读？你说你还开启了 binlog，能说说是什么吗？ canal 用过吗？说说它的原理。MySQL 主从模式如何开启？你是如何优化 SQL 的？上亿级别的数据你是如何优化分页的？为什么不建议在 MySQL 中使用分区机制？为什么删了数据还是磁盘空间不变？自增主键用完了会怎么样？如何解决这个问题？自增主键什么时候是不连续的？这样做的好处是什么？为什么推荐用自增主键？ B+ Tree 又是什么？如何迁移数据库？为什么不建议使用外键？在高版本的 MySQL 中 count(1) 和 count(*) 区别是什么？ order by 是如何工作的？分页机制又是什么？ ACL 和 RBAC 是什么？ grant 之后一定要刷新吗？视图用过吗？它的作用说下。视图和表的区别说下。存储过程写过吗？存储函数和存储过程的区别说下。NoSQL 用过吗？ OceanBase 了解吗？ HBase 了解吗？<u>HBase 有哪些坑，你碰到过吗？什么是 RegionServer ？</u>什么时候用 NoSQL，它能取代 RDBMS 吗？你说你用过 Elasticsearch，能说下它的请求执行过程吗？它的总体架构说下。它的插件你用过吗？你们的分词策略是什么？倒排索引说下是什么。

给二叉树后序和中序遍历，写前序遍历。手写个快排。翻转一下链表。O （ 1 ）找出链表有环。DFS 找出二叉树搜索树第 k 大节点。

实现一个多线程类，并用该线程类实例化 3 个线程 A,B,C ； A 线程打印字符 A,B 线程打印字符 B，C 线程打印字符 C ；启动这 3 个线程，要求启动线程的顺序为 C 线程->B 线程->A 线程，并且最后输出内容为：A B C 。禁止使用 sleep 函数。阿里应该还有各种多线程打印的问题，这个得准备。

接下来应该是更高级的算法题目，至少是 LeetCode Menium 难度的，翻转链表确实有点初级，练个半个小时就搞定了。暂时还没碰到，碰到我也挂了。

你平时是怎么学习一门新技术的？

最近有看书吗？看的什么书？能和我讲讲吗？

你为什么离职？下一家公司的期望是什么？期望薪资？
https://github.com/young1lin/notes/blob/master/Prepare%20for%20Interview/%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E7%AE%80%E5%8D%95%E6%B1%87%E6%80%BB.md


ACID 倒还是好说 ，要说实现细节，光是 MySQL 引擎实现 C 的细节， 刷写脏页 以及 undolog 的格式 细节上来 可以问上半天.. 然后顺带问下 binlog 格式 以及主从同步..

可能面试官想了解你对 GC 算法的理解吧，其实就我而言，我也不会去背那些参数，因为大部分能调的几个参数无非是在吞吐量跟停顿时间 取得一个平衡，想要高吞吐量 那么就只能牺牲停顿时间，反之也是如此..

包括 G1 的 XX:MaxGCPauseMillis 意义不大，你调低了，自然吞吐量上不去，调高了停顿时间就会多，这个还是要根据你线上的 JVM 实例的真实情况 来做决定

 O(1)链表有环


 MySQL 不止问 undo log 、redo log，还会问蔟集索引，非蔟集索引，还有具体 SQL 优化，前面是基础。后面 MySQL 里面几个核心线程知道吗？说说它们的作用。MySQL 还不止问这些，我简历上写了调整了 MySQL 参数，buffer_pool_size 等，盯着我参数问，为什么要这么改？你还知道其他参数优化吗？

刚面试个简单的，找 N 个数前 10 大的数，我说 PriorityQueue 维护个 10 容量的小顶堆，O(1) 空间复杂度，O(n) 时间复杂度，然后让我手画一下 Java 的 PriorityQueue 的插入和删除的具体过程。


HashSet 的底层实现说下？
为什么内置 HashMap ？
说下它的数据结构，为什么 loadFactor 是 0.75 ？
为什么要高位参与与运算？
为什么它的 size 是 2 的 n 次方？
为什么默认是 16 ？
讲下它的扩容机制。什么时候转红黑树，为什么要转红黑树？
为什么它是线程不安全的，它的哪些方法是线程不安全的？
为什么会造成死循环？
1.8 是如何解决这个问题的？
它的线程安全的实现有什么？
ConcurrentHashMap 和 HashTable 有什么区别？
说下它 1.7 和 1.8 的实现是什么？
有什么区别？
为什么要这么做？
为什么说 ConcurrentHashMap 是线程安全的？
它的 get 操作是有锁的吗？
它是强一致性的吗？
它为什么是弱一致性的？
ConcurrentHashMap 1.7 和 1.8 是如何扩容的？
sizeCtl 参数是干什么的，讲讲变换过程？
为什么要用 volatile 修饰？
说说它的功能？
什么是 MESI 协议？
CPU 原语是什么？
什么是可见性？
JMM 说说是什么？
为什么要有 JMM ？
Happened-before 是什么？
它和 synchronized 的区别是什么？
锁的升级与降级说下是什么？
偏向锁是什么？
Mark-Wrod 说下？
锁的粒度是什么？
锁消除了解吗？
锁会被合并吗？
什么时候会发生？
你刚才说了 CAS，你能说下它是什么东西吗？
为什么要引入 CAS ？
ABA 问题是如何解决的？
AQS 了解吗？
它是如何实现的？
CLH 又是什么？
ReentrantLock 和 synchronized 区别是什么？
为什么 ReetrantLock 能实现公平锁？
默认构造器是公平锁吗？
为什么不是？
Copy-on-Write 了解吗？
Fork/Join 又是什么？
什么是线程，什么是协程？
你刚才说了管程？
你能说下这几个到底是做什么的吗？
线程池说下参数，四种内置的拒绝策略，以及它的执行流程。你用过吗？
为什么要这么设置参数？
I/O 密集型应用和计算密集型应用如何设置其参数？
你具体的业务线程池的参数是怎么设计的？
为什么？
测过吗？
你定制化开发过吗？
线程池预留了 3 个供子类扩展的方法你知道是哪三个吗？
能做什么你知道吗？
ThreadLocal 是什么？
它为什么会造成内存泄漏？
你实际开发中用到过吗？
Spring 事务用这个干什么的？
什么是事务的 SavePoint ？
你知道死锁吗？
如何解决死锁？
sleep 和 wait 的区别是什么？
BIO 、NIO 、AIO 是什么？
说下区别，以及如何使用？
了解 Netty 吗？
如何解决粘包问题？
ChannelPipeline 又是什么？
ByteBuf 知道吗？
读写指针又是什么？
它和 mina 的区别是什么？
它的 Zero-Copy ？
了解过 FastThreadLocal 吗？
它为什么比 ThreadLocal 快？
有看过其中源码吗？
Netty 解决了 NIO 类库的什么问题？
空轮询又是什么？
RPC 又是什么？
序列化和反序列化又是什么？
几个核心类说下。是干什么的？


你说你了解虚拟机，你知道虚拟机的运行时数据区吗？
哪些是线程共享的，哪些是线程独有的？
你了解 JVM 调优吗？
调优过吗？
为什么要这么设置？
垃圾回收算法有几种？
为什么要分代收集？
Young 区说说它的分布结构，为什么 Eden 区 80%？
为什么大对象直接进入老年代？
控制的参数是什么？
一个对象如果不是大对象，怎样才能进入老年代？
控制的参数是什么？
什么时候会发生 OOM ？
你遇到过吗？
怎么解决的？
为什么低版本的 JDK 要把永久代内存调大点？
默认大小是多少你知道吗？
什么是 Major GC，什么是 Minor GC ？
什么情况下会频繁 GC ？
你查看过 GC 日志吗？
什么时候回收对象？
引用计数和可达性分析是什么？
为什么 Java 使用后者？
Python 使用前者？
什么是 GCRoot ？
什么时候对象不可达？
Java 的四种引用说下，分别用在什么场景？
你知道 JDK 源码哪里有用到 WeakReference 吗？
什么是 STW ？
什么是 Safepoint ？
类加载的过程说下，什么时候优化，以及不同的时候的主要优化是什么？
解语法糖是什么时候？
为什么在编译的时候解语法糖？
什么是双亲委派模型？
可以破坏吗？
各个 ClassLoader 加载哪部分类的？
你自定义过 ClassLoader 吗？
你说你用过 Jstack 诊断 CPU 使用率飙升的情况，说下具体步骤？
Arthas 用过吗？
Class 文件格式说下，什么是魔数，Class 文件的魔数是什么？
JMX 了解吗？


ACID 说下是什么。你说你优化过 SQL，怎么优化的说下。like '%xx%'，like '%xx'，like 'xx%' 哪种情况会用到索引？
说下 MySQL 执行流程。WAL(Write-Ahead Logging) 知道吗？
redo log 和 undo log 是什么，它们作用说下。你说你改过 buffer_pool_size 等参数，为什么要改它？
它里面的数据结构说下是什么？
为什么冷热 3:7 ？
join_buffer 你说你也改了，为什么？
什么是驱动表和被驱动表？
如何优化？
你说你建了索引，什么是蔟集索引，什么是非蔟集索引？
什么是回表？
什么时候会索引失效？
你的二级索引什么用得多？
为什么优先使用普通索引，而不是唯一索引？
MySQL 会死锁吗？
什么是间隙锁？
它会导致什么问题？
MVCC 说下是什么？
4 种事务说下是什么？
哪种或者哪几种事务隔离级别能避免幻读？
能避免脏读？
你说你还开启了 binlog，能说说是什么吗？
canal 用过吗？
说说它的原理。MySQL 主从模式如何开启？
你是如何优化 SQL 的？
上亿级别的数据你是如何优化分页的？
为什么不建议在 MySQL 中使用分区机制？
为什么删了数据还是磁盘空间不变？
自增主键用完了会怎么样？
如何解决这个问题？
自增主键什么时候是不连续的？
这样做的好处是什么？
为什么推荐用自增主键？
B+ Tree 又是什么？
如何迁移数据库？
为什么不建议使用外键？
在高版本的 MySQL 中 count(1) 和 count(*) 区别是什么？
order by 是如何工作的？
分页机制又是什么？
ACL 和 RBAC 是什么？
grant 之后一定要刷新吗？
视图用过吗？
它的作用说下。视图和表的区别说下。存储过程写过吗？
存储函数和存储过程的区别说下。NoSQL 用过吗？
OceanBase 了解吗？
HBase 了解吗？
<u>HBase 有哪些坑，你碰到过吗？
什么是 RegionServer ？
</u>什么时候用 NoSQL，它能取代 RDBMS 吗？
你说你用过 Elasticsearch，能说下它的请求执行过程吗？
它的总体架构说下。它的插件你用过吗？
你们的分词策略是什么？
倒排索引说下是什么。

为什么 Redis 不能叫 WAL

给二叉树后序和中序遍历，写前序遍历。手写个快排。翻转一下链表。O （ 1 ）找出链表有环。DFS 找出二叉树搜索树第 k 大节点。

实现一个多线程类，并用该线程类实例化 3 个线程 A,B,C ； A 线程打印字符 A,B 线程打印字符 B，C 线程打印字符 C ；启动这 3 个线程，要求启动线程的顺序为 C 线程->B 线程->A 线程，并且最后输出内容为：A B C 。禁止使用 sleep 函数。阿里应该还有各种多线程打印的问题，这个得准备。

有 SOA 服务开发经验，对 SOA 和平台化有深度和广度的了解，以及对原有系统服务的改进意见（包括产品架构、技术架构和 SLA 等）；


reddit/r/machinelearning
test
http://news.163.com/15/0114/02/AFSU7THF0001124J.html
http://news.qq.com/a/20141218/040904.htm
http://news.qq.com/original/jdrw/j27.html
